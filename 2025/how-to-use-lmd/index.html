<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" 
      xml:lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" 
        content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>新的 lmd 脚本的用法</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../appearance/lmd.css" />
</head>
<body>

<header id="title-block-header">
  <h1 class="title">新的 lmd 脚本的用法
    <span class="back-to-top-span">    <a href="../index.html">
      <button id="back-to-top" aria-label="返回目录">▲</button>
    </a></span></h1>
</header>
<p class="date">2025 年 01 月 27 日</p>

<nav id="TOC" role="doc-toc">
  <ul>
  <li><a href="#安装" id="toc-安装">安装</a></li>
  <li><a href="#网站初始化" id="toc-网站初始化">网站初始化</a></li>
  <li><a href="#文章" id="toc-文章">文章</a></li>
  <li><a href="#外观" id="toc-外观">外观</a></li>
  </ul>
</nav>

<p>近日，重写了 lmd 脚本，详见「<a href="../best-lmd/index.html">lmd
脚本的设计与实现</a>」。新的 lmd 脚本比<a
href="../../old-posts/output/bash/lmd.html">它的上个版本</a>更为简单，我觉得也更为易用，本文介绍它的用法。</p>
<h1 id="安装">安装</h1>
<p>可通过 git 获取 lmd：</p>
<pre class="console"><code>$ git clone https://github.com/liyanrui/lmd.git</code></pre>
<p>亦可下载 lmd-main.zip 包，解包后，得到目录 lmd-main，更其名为
lmd（并非必须）。将包含 lmd 脚本的目录移动到你觉得适合它的目录，例如
/opt，便可完成 lmd 的安装。然后，将 lmd 脚本所在路径添加至 PATH
变量，亦即在 $HOME/.bashrc 中增加以下内容：</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">PATH</span><span class="op">=</span>/opt/lmd:<span class="va">$PATH</span></span></code></pre></div>
<p>无论 lmd 脚本被安装至何处，只需要保证它与 data 以及 helper
目录位于同一目录即可。</p>
<p>需要注意，执行 lmd 脚本，需要系统中存在 Bash 环境和
Awk（gawk、mawk……），这对于任何一个 Linux 系统（包括其他类 Unix
系统，例如 macOS）而言，很容易得到。即使在 Windows 系统中，获得 Bash 和
Awk 也并非难事。</p>
<h1 id="网站初始化">网站初始化</h1>
<p>假设在 <code>$HOME/documents</code> 目录里创建网站根目录
foo，只需执行以下命令：</p>
<pre class="console"><code>$ cd $HOME/documents
$ lmd init &quot;Foo&quot; &quot;this is foo.&quot; foo</code></pre>
<p>命令 <code>lmd init</code> 接受 2
个参数，第一个参数是网站的标题，第二个参数是网站根目录名。</p>
<p>进入 foo 目录，使用 <code>lmd tree</code>
命令可查看网站初始状态：</p>
<pre class="console"><code>$ cd foo
$ lmd tree
foo
├── appearance
│   ├── lmd.css
│   └── pandoc
│       └── data
│           └── templates
│               ├── homepage.template
│               └── post.template
├── figures
├── index.md
└── lmd.conf</code></pre>
<p>如果需要将网站发布为 github
主页，记得在网站根目录下添加一份空文件：</p>
<pre class="console"><code>$ touch .nojekyll</code></pre>
<p>该文件可避免 github 平台误将网站视为由平台默认的静态网站生成器 jekyll
创建。</p>
<h1 id="文章">文章</h1>
<p>在网站根目录里，可以创建一篇文章，它可以是真正的文章，也可以作为一个分类，令其包含一些其他文章。</p>
<p>例如，在 foo 目录下创建一篇名为「2025
年的日志」的文章，用于包含本年度所有的日志：</p>
<pre class="console"><code>$ lmd new &quot;2025 年的日志&quot; 2025
$ cd 2025
$ lmd build</code></pre>
<p><code>lmd new</code> 也接受 2 个参数，且参数的含义与
<code>lmd init</code> 的参数相同。<code>lmd build</code>
命令可将文章及其上级文章（在上例中，上级文章即网站首页）生成为网页。</p>
<p>在 <code>2025</code> 目录里，创建本年度的一篇日志：</p>
<pre class="console"><code>$ lmd new &quot;Hello world&quot; hello-world
$ cd hell-world</code></pre>
<p>执行以下命令可为文章增加时间戳：</p>
<pre class="console"><code>$ lmd add timestamp</code></pre>
<p>然后用你习惯的文本编辑器，编辑 hello-world 目录里的 index.md
文件，这份文件包含的便是文章内容。完成文章创作后，在 hello-world
目录里执行</p>
<pre class="console"><code>$ lmd build</code></pre>
<p>便可将文章转换为网页。</p>
<p>要删除一篇文章，例如删除上述的 hello-world，只需转到包含 hello-world
的目录：</p>
<pre class="console"><code>$ cd ..    # 从当前的 hello-world 目录转到上级目录
$ lmd delete hello-world</code></pre>
<h1 id="外观">外观</h1>
<p>在文集的 appearance 目录里，lmd.css 用于定制 HTML 页面元素的外观。在
appearance/pandoc/data/templates 目录中有两份 pandoc
模板，homepage.template 和
post.template，前者为首页模板，后者为文章模板，若你熟悉 pandoc
的用法或者据其内容略加揣测，自行对页面应当出现哪些元素予以定制。</p>

<div class="footer">需要联系我吗？请发邮件至 <a
href="mailto:lyr.m2@live.cn" class="email">lyr.m2@live.cn</a></div>
</body>
</html>
